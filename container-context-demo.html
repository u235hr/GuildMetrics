<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å®¹å™¨æŸ¥è¯¢ä¸Šä¸‹æ–‡æŸ¥æ‰¾æœºåˆ¶</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* æ¼”ç¤ºä¸åŒçš„å®¹å™¨æŸ¥è¯¢ä¸Šä¸‹æ–‡ */
        .no-container {
            /* æ²¡æœ‰container-typeï¼Œä¸æ˜¯å®¹å™¨æŸ¥è¯¢ä¸Šä¸‹æ–‡ */
            background: #fee2e2;
            border: 2px solid #ef4444;
        }
        
        .with-container {
            container-type: size;
            container-name: demo-container;
            background: #dcfce7;
            border: 2px solid #22c55e;
        }
        
        .viewport-container {
            /* æ¨¡æ‹Ÿè§†å£ä½œä¸ºå®¹å™¨ */
            container-type: size;
            container-name: viewport;
            background: #dbeafe;
            border: 2px solid #3b82f6;
        }
        
        /* åŸºäºä¸åŒå®¹å™¨çš„æŸ¥è¯¢ */
        @container demo-container (min-height: 100px) {
            .demo-card {
                background: linear-gradient(45deg, #22c55e, #16a34a);
                color: white;
                padding: 1rem;
                border-radius: 8px;
            }
        }
        
        @container demo-container (min-height: 150px) {
            .demo-card {
                padding: 1.5rem;
                font-size: 1.125rem;
            }
        }
        
        @container viewport (min-height: 200px) {
            .viewport-card {
                background: linear-gradient(45deg, #3b82f6, #1d4ed8);
                color: white;
                padding: 1rem;
                border-radius: 8px;
            }
        }
        
        /* æ²¡æœ‰å®¹å™¨æŸ¥è¯¢ä¸Šä¸‹æ–‡æ—¶çš„æ ·å¼ */
        .orphan-card {
            background: linear-gradient(45deg, #ef4444, #dc2626);
            color: white;
            padding: 0.5rem;
            border-radius: 8px;
            font-size: 0.875rem;
        }
        
        /* è°ƒè¯•ä¿¡æ¯ */
        .debug-info {
            position: absolute;
            top: 4px;
            right: 4px;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 10px;
            font-family: monospace;
        }
        
        .context-indicator {
            position: absolute;
            top: 4px;
            left: 4px;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 10px;
            font-weight: bold;
        }
        
        .context-none { background: #ef4444; color: white; }
        .context-local { background: #22c55e; color: white; }
        .context-viewport { background: #3b82f6; color: white; }
    </style>
</head>
<body class="bg-gray-100 p-4">
    <div class="max-w-6xl mx-auto space-y-8">
        <h1 class="text-3xl font-bold text-center mb-8">å®¹å™¨æŸ¥è¯¢ä¸Šä¸‹æ–‡æŸ¥æ‰¾æœºåˆ¶è¯¦è§£</h1>
        
        <!-- æ§åˆ¶é¢æ¿ -->
        <div class="bg-white p-4 rounded-lg shadow-lg">
            <h2 class="text-xl font-semibold mb-4">è°ƒæ•´é«˜åº¦è§‚å¯Ÿcqhçš„è®¡ç®—åŸºå‡†</h2>
            <div class="flex gap-4 items-center flex-wrap">
                <label class="flex items-center gap-2">
                    å¤–å±‚é«˜åº¦: 
                    <input type="range" id="outerHeight" min="100" max="300" value="200" class="w-32">
                    <span id="outerValue">200px</span>
                </label>
                <label class="flex items-center gap-2">
                    ä¸­å±‚é«˜åº¦: 
                    <input type="range" id="middleHeight" min="50" max="100" value="85" class="w-32">
                    <span id="middleValue">85%</span>
                </label>
            </div>
        </div>
        
        <!-- åœºæ™¯å¯¹æ¯” -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- åœºæ™¯1ï¼šæ²¡æœ‰å®¹å™¨æŸ¥è¯¢ä¸Šä¸‹æ–‡ -->
            <div class="bg-white p-4 rounded-lg shadow-lg">
                <h3 class="text-lg font-semibold mb-4 text-red-600">âŒ åœºæ™¯1ï¼šæ— å®¹å™¨æŸ¥è¯¢ä¸Šä¸‹æ–‡</h3>
                <div class="viewport-container relative p-4 rounded" style="height: 200px;">
                    <div class="context-indicator context-viewport">è§†å£å®¹å™¨</div>
                    <div class="debug-info">è§†å£: <span id="viewport1">200px</span></div>
                    
                    <div class="no-container relative p-2 rounded" style="height: 85%;">
                        <div class="context-indicator context-none">æ— @container</div>
                        <div class="debug-info">å®é™…: <span id="middle1">170px</span></div>
                        
                        <div class="h-full flex items-center justify-center">
                            <div class="orphan-card text-center" style="height: 80%; width: 80px;">
                                <div class="text-xs font-bold mb-1">å¡ç‰‡</div>
                                <div class="text-xs">80cqh</div>
                                <div class="text-xs">åŸºäºè§†å£?</div>
                                <div class="text-xs mt-1">ä¸ç¡®å®š!</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="mt-2 text-sm text-red-600">
                    é—®é¢˜ï¼šcqhå‘ä¸ŠæŸ¥æ‰¾ï¼Œå¯èƒ½åŸºäºè§†å£å®¹å™¨(200px)è€Œä¸æ˜¯ä¸­å±‚(170px)
                </div>
            </div>
            
            <!-- åœºæ™¯2ï¼šåªåœ¨ä¸­å±‚è®¾ç½®å®¹å™¨æŸ¥è¯¢ -->
            <div class="bg-white p-4 rounded-lg shadow-lg">
                <h3 class="text-lg font-semibold mb-4 text-yellow-600">âš ï¸ åœºæ™¯2ï¼šåªåœ¨ä¸­å±‚è®¾ç½®</h3>
                <div class="no-container relative p-4 rounded" style="height: 200px;">
                    <div class="context-indicator context-none">æ— @container</div>
                    <div class="debug-info">å¤–å±‚: <span id="outer2">200px</span></div>
                    
                    <div class="with-container relative p-2 rounded" style="height: 85%;">
                        <div class="context-indicator context-local">æœ‰@container</div>
                        <div class="debug-info">å®¹å™¨: <span id="middle2">170px</span></div>
                        
                        <div class="h-full flex items-center justify-center">
                            <div class="demo-card text-center" style="height: 80%; width: 80px;">
                                <div class="text-xs font-bold mb-1">å¡ç‰‡</div>
                                <div class="text-xs">80cqh</div>
                                <div class="text-xs">åŸºäº170px</div>
                                <div class="text-xs mt-1">= <span id="card2">136px</span></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="mt-2 text-sm text-yellow-600">
                    éƒ¨åˆ†æ­£ç¡®ï¼šcqhåŸºäºä¸­å±‚å®¹å™¨(170px)ï¼Œä½†å¤–å±‚å˜åŒ–æ—¶å¯èƒ½ä¸ç¨³å®š
                </div>
            </div>
            
            <!-- åœºæ™¯3ï¼šå¤šå±‚çº§å®¹å™¨æŸ¥è¯¢ -->
            <div class="bg-white p-4 rounded-lg shadow-lg">
                <h3 class="text-lg font-semibold mb-4 text-green-600">âœ… åœºæ™¯3ï¼šå¤šå±‚çº§è®¾ç½®</h3>
                <div class="with-container relative p-4 rounded" style="height: 200px;">
                    <div class="context-indicator context-local">å¤–å±‚@container</div>
                    <div class="debug-info">å¤–å±‚: <span id="outer3">200px</span></div>
                    
                    <div class="with-container relative p-2 rounded" style="height: 85%;">
                        <div class="context-indicator context-local">å†…å±‚@container</div>
                        <div class="debug-info">å®¹å™¨: <span id="middle3">170px</span></div>
                        
                        <div class="h-full flex items-center justify-center">
                            <div class="demo-card text-center" style="height: 80%; width: 80px;">
                                <div class="text-xs font-bold mb-1">å¡ç‰‡</div>
                                <div class="text-xs">80cqh</div>
                                <div class="text-xs">åŸºäº170px</div>
                                <div class="text-xs mt-1">= <span id="card3">136px</span></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="mt-2 text-sm text-green-600">
                    å®Œç¾ï¼šæ¯å±‚éƒ½æœ‰æ˜ç¡®çš„å®¹å™¨æŸ¥è¯¢ä¸Šä¸‹æ–‡ï¼Œè®¡ç®—ç¨³å®šå¯é¢„æµ‹
                </div>
            </div>
        </div>
        
        <!-- æŸ¥æ‰¾æœºåˆ¶è¯´æ˜ -->
        <div class="bg-blue-50 p-6 rounded-lg">
            <h3 class="text-xl font-semibold text-blue-800 mb-4">ğŸ” cqhå•ä½çš„æŸ¥æ‰¾æœºåˆ¶</h3>
            <div class="space-y-4">
                <div class="bg-white p-4 rounded border-l-4 border-blue-500">
                    <h4 class="font-semibold mb-2">1. å‘ä¸ŠæŸ¥æ‰¾å®¹å™¨æŸ¥è¯¢ä¸Šä¸‹æ–‡</h4>
                    <pre class="text-sm bg-gray-100 p-2 rounded"><code>element.style.height = "80cqh"
â†“
æŸ¥æ‰¾æœ€è¿‘çš„ç¥–å…ˆå…ƒç´ å…·æœ‰ container-type å±æ€§
â†“
åŸºäºè¯¥ç¥–å…ˆçš„å°ºå¯¸è®¡ç®— 80%</code></pre>
                </div>
                
                <div class="bg-white p-4 rounded border-l-4 border-yellow-500">
                    <h4 class="font-semibold mb-2">2. æŸ¥æ‰¾é¡ºåº</h4>
                    <div class="text-sm space-y-1">
                        <div>â€¢ çˆ¶å…ƒç´  â†’ ç¥–çˆ¶å…ƒç´  â†’ æ›¾ç¥–çˆ¶å…ƒç´  â†’ ...</div>
                        <div>â€¢ ç›´åˆ°æ‰¾åˆ° <code class="bg-gray-200 px-1 rounded">container-type: size | inline-size</code></div>
                        <div>â€¢ å¦‚æœéƒ½æ²¡æ‰¾åˆ°ï¼Œå¯èƒ½åŸºäºåˆå§‹åŒ…å«å—(è§†å£)</div>
                    </div>
                </div>
                
                <div class="bg-white p-4 rounded border-l-4 border-green-500">
                    <h4 class="font-semibold mb-2">3. ä¸ºä»€ä¹ˆéœ€è¦å¤šå±‚çº§ï¼Ÿ</h4>
                    <div class="text-sm space-y-1">
                        <div>â€¢ <strong>æ˜ç¡®æ€§</strong>ï¼šæ¯å±‚éƒ½æœ‰æ¸…æ™°çš„æŸ¥è¯¢ä¸Šä¸‹æ–‡</div>
                        <div>â€¢ <strong>å¯é¢„æµ‹æ€§</strong>ï¼šä¸ä¾èµ–æ„å¤–çš„è¿œç¨‹å®¹å™¨</div>
                        <div>â€¢ <strong>ç¨³å®šæ€§</strong>ï¼šå¸ƒå±€å˜åŒ–æ—¶è®¡ç®—åŸºå‡†ä¸ä¼šè·³è·ƒ</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- å®é™…è®¡ç®—æ¼”ç¤º -->
        <div class="bg-gray-50 p-6 rounded-lg">
            <h3 class="text-xl font-semibold mb-4">ğŸ§® å®æ—¶è®¡ç®—æ¼”ç¤º</h3>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
                <div class="bg-red-100 p-3 rounded">
                    <h4 class="font-semibold text-red-700">åœºæ™¯1è®¡ç®—</h4>
                    <div>80cqh å¯èƒ½åŸºäº:</div>
                    <div>â€¢ è§†å£: <span id="calc1a">200px</span> â†’ <span id="result1a">160px</span></div>
                    <div>â€¢ æˆ–å…¶ä»–å®¹å™¨ (ä¸ç¡®å®š)</div>
                </div>
                <div class="bg-yellow-100 p-3 rounded">
                    <h4 class="font-semibold text-yellow-700">åœºæ™¯2è®¡ç®—</h4>
                    <div>80cqh åŸºäºä¸­å±‚:</div>
                    <div><span id="calc2">170px</span> Ã— 80% = <span id="result2">136px</span></div>
                </div>
                <div class="bg-green-100 p-3 rounded">
                    <h4 class="font-semibold text-green-700">åœºæ™¯3è®¡ç®—</h4>
                    <div>80cqh åŸºäºå†…å±‚:</div>
                    <div><span id="calc3">170px</span> Ã— 80% = <span id="result3">136px</span></div>
                    <div class="text-xs mt-1">(æœ€ç¨³å®šå¯é )</div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        const outerSlider = document.getElementById('outerHeight');
        const middleSlider = document.getElementById('middleHeight');
        const outerValue = document.getElementById('outerValue');
        const middleValue = document.getElementById('middleValue');
        
        function updateDemo() {
            const outerHeight = parseInt(outerSlider.value);
            const middleRatio = parseInt(middleSlider.value);
            const middleHeight = Math.round(outerHeight * middleRatio / 100);
            const cardHeight = Math.round(middleHeight * 0.8);
            
            outerValue.textContent = outerHeight + 'px';
            middleValue.textContent = middleRatio + '%';
            
            // æ›´æ–°æ‰€æœ‰å®¹å™¨é«˜åº¦
            document.querySelectorAll('[style*="height: 200px"]').forEach(el => {
                el.style.height = outerHeight + 'px';
            });
            
            document.querySelectorAll('[style*="height: 85%"]').forEach(el => {
                el.style.height = middleRatio + '%';
            });
            
            // æ›´æ–°è°ƒè¯•ä¿¡æ¯
            document.getElementById('viewport1').textContent = outerHeight + 'px';
            document.getElementById('middle1').textContent = middleHeight + 'px';
            document.getElementById('outer2').textContent = outerHeight + 'px';
            document.getElementById('middle2').textContent = middleHeight + 'px';
            document.getElementById('card2').textContent = cardHeight + 'px';
            document.getElementById('outer3').textContent = outerHeight + 'px';
            document.getElementById('middle3').textContent = middleHeight + 'px';
            document.getElementById('card3').textContent = cardHeight + 'px';
            
            // æ›´æ–°è®¡ç®—æ¼”ç¤º
            document.getElementById('calc1a').textContent = outerHeight + 'px';
            document.getElementById('result1a').textContent = Math.round(outerHeight * 0.8) + 'px';
            document.getElementById('calc2').textContent = middleHeight + 'px';
            document.getElementById('result2').textContent = cardHeight + 'px';
            document.getElementById('calc3').textContent = middleHeight + 'px';
            document.getElementById('result3').textContent = cardHeight + 'px';
        }
        
        outerSlider.addEventListener('input', updateDemo);
        middleSlider.addEventListener('input', updateDemo);
        
        // åˆå§‹åŒ–
        updateDemo();
    </script>
</body>
</html>